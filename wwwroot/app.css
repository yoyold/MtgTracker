/* ═══════════════════════════════════════════════════════════
   MTG TRACKER  — Dark Arcane Edition
   System fonts · No external requests · GDPR compliant
═══════════════════════════════════════════════════════════ */

:root {
  /* Core palette */
  --ink:        #07080d;
  --void:       #0c0d14;
  --deep:       #10121a;
  --card-bg:    #13161f;
  --card-bg2:   #181b26;
  --raised:     #1c2030;
  --border:     #252a3e;
  --border2:    #303550;

  /* Gold */
  --g0: #3d2e08;
  --g1: #7a5c18;
  --g2: #b8882e;
  --g3: #d4a83c;
  --g4: #e8c058;
  --g5: #f5d878;
  --g6: #faedb8;

  /* Mana colors */
  --white:  #f0ead8;
  --blue:   #1a5fa8;
  --blue2:  #4a8fdc;
  --black:  #7a3faa;
  --red:    #c03020;
  --red2:   #e85040;
  --green:  #1a7a3a;
  --green2: #40a860;

  /* Status */
  --warn:   #c87020;
  --danger: #b01818;
  --danger2:#e02020;

  /* Text */
  --tx1: #e8e0cc;
  --tx2: #a09070;
  --tx3: #504838;

  /* Effects */
  --sh: 0 4px 24px rgba(0,0,0,.8), 0 2px 8px rgba(0,0,0,.6);
  --sh2: 0 8px 48px rgba(0,0,0,.9), 0 2px 12px rgba(0,0,0,.7);
  --gold-glow: 0 0 20px rgba(212,168,60,.18);
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }

body {
  background: var(--void);
  color: var(--tx1);
  font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, Georgia, serif;
  min-height: 100vh;
  overflow-x: hidden;
  /* Subtle woven texture */
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4'%3E%3Crect width='4' height='4' fill='%2307080d'/%3E%3Crect width='1' height='1' x='0' y='0' fill='%230d0e16' opacity='.6'/%3E%3Crect width='1' height='1' x='2' y='2' fill='%230d0e16' opacity='.6'/%3E%3C/svg%3E"),
    radial-gradient(ellipse 80% 60% at 20% 10%, rgba(26,50,130,.12) 0%, transparent 60%),
    radial-gradient(ellipse 60% 80% at 80% 90%, rgba(80,20,100,.1) 0%, transparent 60%);
}

/* ── App wrapper ── */
.mtg-app { position: relative; min-height: 100vh; padding-bottom: 5rem; }

/* ── Floating rune particles ── */
.bg-runes { position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden; }

.rune {
  --i: 0;
  position: absolute;
  font-size: clamp(.6rem, 1.5vw, 1.4rem);
  left: calc(var(--i) * 8.5%);
  top: calc(3% + var(--i) * 8%);
  opacity: 0;
  color: var(--g2);
  animation: rDrift calc(16s + var(--i) * 2s) ease-in-out calc(var(--i) * 1.2s) infinite;
  user-select: none;
  filter: blur(.4px);
}
.rune:nth-child(3n)   { color: var(--blue2); }
.rune:nth-child(4n)   { color: var(--red2); }
.rune:nth-child(5n)   { color: var(--green2); }
.rune:nth-child(7n)   { color: var(--black); }

@keyframes rDrift {
  0%   { opacity: 0;    transform: translateY(10px) rotate(0deg)  scale(.8); }
  15%  { opacity: .05;  }
  50%  { opacity: .08;  transform: translateY(-20px) rotate(30deg) scale(1.1); }
  85%  { opacity: .04;  }
  100% { opacity: 0;    transform: translateY(-40px) rotate(60deg) scale(.9); }
}

/* ════════════════════════════════════════
   HEADER — MTG card back inspired
════════════════════════════════════════ */
.app-header {
  position: relative; z-index: 20;
  display: flex; align-items: center; justify-content: space-between;
  padding: 1rem 1.5rem;
  background: linear-gradient(180deg, #0c0e18 0%, #10121c 100%);
  border-bottom: 1px solid var(--g1);
  box-shadow: 0 2px 0 var(--g0), 0 4px 20px rgba(0,0,0,.8);
}

/* Ornate header corners */
.app-header::before, .app-header::after {
  content: '';
  position: absolute; bottom: 0;
  width: 60px; height: 1px;
  background: linear-gradient(90deg, var(--g4), transparent);
}
.app-header::before { left: 0; }
.app-header::after  { right: 0; transform: scaleX(-1); }

.logo-wrap { display: flex; align-items: center; gap: .7rem; }

.logo-wrap h1 {
  font-family: 'Palatino Linotype', Palatino, serif;
  font-weight: 900; letter-spacing: .2em; text-transform: uppercase;
  font-size: clamp(1rem, 2.8vw, 1.75rem);
  background: linear-gradient(175deg,
    var(--g6) 0%, var(--g5) 20%, var(--g3) 50%, var(--g2) 75%, var(--g1) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  filter: drop-shadow(0 1px 3px rgba(0,0,0,.9));
}

.mana-symbol {
  font-size: 1.1rem; color: var(--g2); opacity: .7;
  animation: mspin 6s ease-in-out infinite;
  filter: drop-shadow(0 0 5px rgba(212,168,60,.4));
}
.mana-symbol:last-child { animation-delay: -3s; }
@keyframes mspin { 0%,100%{transform:rotate(0)scale(1);opacity:.6} 50%{transform:rotate(20deg)scale(1.15);opacity:.9} }

/* Turn counter */
.turn-badge {
  display: flex; flex-direction: column; align-items: center; gap: .15rem;
  padding: .5rem 1.2rem;
  background: linear-gradient(145deg, #181a28, #0e1018);
  border: 1px solid var(--g1);
  border-radius: 6px;
  box-shadow: var(--gold-glow), inset 0 1px 0 rgba(212,168,60,.08);
  position: relative;
}
.turn-badge::before, .turn-badge::after {
  content: '◆';
  position: absolute; top: 50%; transform: translateY(-50%);
  font-size: .4rem; color: var(--g1); opacity: .6;
}
.turn-badge::before { left: .3rem; }
.turn-badge::after  { right: .3rem; }

.turn-label { font-size: .5rem; letter-spacing: .35em; color: var(--tx3); text-transform: uppercase; }

.turn-number {
  font-weight: 900; font-size: 1.9rem; line-height: 1;
  background: linear-gradient(175deg, var(--g6) 0%, var(--g4) 50%, var(--g2) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}

.turn-controls { display: flex; gap: .3rem; margin-top: .1rem; }
.btn-micro {
  background: linear-gradient(145deg, #1e2232, #131620);
  border: 1px solid var(--border); color: var(--g2);
  font-size: .65rem; padding: .18rem .5rem; border-radius: 3px; cursor: pointer;
  transition: all .15s;
}
.btn-micro:hover { background: linear-gradient(145deg, #262a3e, #1a1e2e); border-color: var(--g2); color: var(--g5); }

/* ════════════════════════════════════════
   PLAYER CARDS — MTG Card Frame Style
════════════════════════════════════════ */
.players-grid {
  position: relative; z-index: 10;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(290px, 1fr));
  gap: 1.1rem; padding: 1.2rem 1.2rem .8rem;
}

.player-card {
  background: var(--card-bg);
  border-radius: 10px;
  padding: 0;
  display: flex; flex-direction: column;
  position: relative; overflow: hidden;
  /* MTG card outer border */
  border: 2px solid var(--g1);
  box-shadow: var(--sh2);
  transition: border-color .35s, box-shadow .4s;
}

/* Active card glows in accent color */
.player-card.active {
  border-color: var(--accent, var(--g3));
  box-shadow: var(--sh2), 0 0 30px -4px var(--accent, var(--g3)),
              0 0 60px -12px var(--accent, var(--g3));
}

/* Inner card chrome frame (like MTG card title bar) */
.card-title-bar {
  background: linear-gradient(90deg,
    color-mix(in srgb, var(--accent, var(--g3)) 25%, var(--card-bg2)),
    color-mix(in srgb, var(--accent, var(--g3)) 10%, var(--card-bg2))
  );
  border-bottom: 1px solid color-mix(in srgb, var(--accent, var(--g3)) 35%, transparent);
  padding: .55rem .8rem;
  display: flex; align-items: center; justify-content: space-between; gap: .5rem;
}

.player-name {
  background: transparent; border: none;
  color: var(--g5);
  font-family: 'Palatino Linotype', Palatino, serif;
  font-size: .95rem; font-weight: 700; letter-spacing: .06em;
  flex: 1; min-width: 0; padding: .05rem 0;
}
.player-name:focus { outline: none; color: var(--g6); }

.btn-active {
  background: transparent;
  border: 1px solid rgba(212,168,60,.2);
  color: var(--tx2); font-size: .58rem;
  font-family: 'Palatino Linotype', Palatino, serif;
  letter-spacing: .06em; padding: .22rem .6rem;
  border-radius: 20px; cursor: pointer; white-space: nowrap; transition: all .2s;
}
.btn-active.on {
  background: linear-gradient(135deg,
    rgba(212,168,60,.22), rgba(212,168,60,.08));
  border-color: var(--g2); color: var(--g5);
}

/* Card body */
.card-body { padding: .8rem; display: flex; flex-direction: column; gap: .7rem; }

/* ── Life display ── */
.life-section {
  display: flex; align-items: center; justify-content: center; gap: .3rem;
  padding: .3rem 0;
}

.life-display {
  display: flex; flex-direction: column; align-items: center;
  min-width: 86px;
  background: linear-gradient(145deg, rgba(0,0,0,.5), rgba(212,168,60,.025));
  border: 1px solid rgba(212,168,60,.12);
  border-radius: 8px; padding: .3rem .4rem;
}

.life-number {
  font-weight: 900; font-size: 3.8rem; line-height: 1;
  font-family: 'Palatino Linotype', Palatino, serif;
  background: linear-gradient(175deg, var(--g6) 0%, var(--g5) 30%, var(--g3) 70%, var(--g2) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  transition: filter .3s;
}
.life-number.warning {
  background: linear-gradient(175deg, #ffb050, var(--warn), #a85010);
  -webkit-background-clip: text; background-clip: text;
  filter: drop-shadow(0 0 8px rgba(200,112,32,.5));
}
.life-number.danger {
  background: linear-gradient(175deg, #ff7060, var(--danger2), #800808);
  -webkit-background-clip: text; background-clip: text;
  filter: drop-shadow(0 0 12px rgba(220,32,32,.6));
  animation: hbeat .75s ease-in-out infinite;
}
@keyframes hbeat { 0%,100%{transform:scale(1)} 35%{transform:scale(1.07)} 65%{transform:scale(.97)} }

.life-label { font-size: .45rem; letter-spacing: .3em; color: var(--tx3); text-transform: uppercase; margin-top: .1rem; }

.life-btn {
  width: 2.15rem; height: 2.15rem; border-radius: 7px;
  font-size: 1.15rem; font-weight: 700; border: 1px solid;
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  transition: all .14s; position: relative; overflow: hidden;
  font-family: 'Palatino Linotype', Palatino, serif;
}
.life-btn::after {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(145deg, rgba(255,255,255,.07) 0%, transparent 60%);
}
.life-btn.big { font-size: .72rem; width: 2.5rem; }
.life-btn.minus {
  background: linear-gradient(145deg, #280c0c, #180606);
  border-color: rgba(180,40,30,.4); color: #f07060;
}
.life-btn.minus:hover {
  background: linear-gradient(145deg, #381010, #200808);
  border-color: var(--red2); box-shadow: 0 0 10px rgba(180,40,30,.3);
  transform: scale(1.08);
}
.life-btn.plus {
  background: linear-gradient(145deg, #081c0c, #051008);
  border-color: rgba(26,120,58,.4); color: #50d070;
}
.life-btn.plus:hover {
  background: linear-gradient(145deg, #0c2810, #08180a);
  border-color: var(--green2); box-shadow: 0 0 10px rgba(26,120,58,.3);
  transform: scale(1.08);
}

/* ── Counters ── */
.counters-row {
  display: flex; align-items: center; gap: .4rem;
  background: linear-gradient(145deg, rgba(0,0,0,.45), rgba(212,168,60,.015));
  border: 1px solid rgba(212,168,60,.09);
  border-radius: 7px; padding: .5rem .5rem;
}
.counter-divider { color: rgba(212,168,60,.15); font-size: 1.3rem; align-self: center; }
.counter-group { display: flex; flex-direction: column; align-items: center; gap: .22rem; flex: 1; }
.counter-label { font-size: .54rem; letter-spacing: .1em; color: var(--tx3); text-transform: uppercase; }
.counter-controls { display: flex; align-items: center; gap: .38rem; }
.ctr-btn {
  background: linear-gradient(145deg, #1c1e2e, #121420);
  border: 1px solid var(--border); color: var(--tx2);
  font-size: .95rem; font-weight: 700; width: 1.6rem; height: 1.6rem;
  border-radius: 5px; cursor: pointer; display: flex; align-items: center; justify-content: center;
  transition: all .13s; line-height: 1;
}
.ctr-btn:hover { background: linear-gradient(145deg, #262838, #1a1c2a); border-color: var(--g1); color: var(--tx1); }
.ctr-val {
  font-size: 1.1rem; font-weight: 700; min-width: 1.4rem; text-align: center; color: var(--tx2);
  font-family: 'Palatino Linotype', Palatino, serif; transition: color .2s;
}
.ctr-val.active-ctr { color: #f06050; }
.ctr-val.gold       { color: var(--g4); }
.ctr-val.warning    { color: var(--warn); }
.ctr-val.danger     { color: var(--danger2); }

.extra-row {
  display: flex; align-items: center; justify-content: space-between; gap: .5rem;
  border-top: 1px solid rgba(212,168,60,.07); padding-top: .5rem;
}
.btn-reset-player {
  background: linear-gradient(145deg, #181a28, #10121e);
  border: 1px solid rgba(212,168,60,.14); color: var(--tx2);
  font-family: 'Palatino Linotype', Palatino, serif;
  font-size: .6rem; letter-spacing: .1em; padding: .28rem .7rem;
  border-radius: 20px; cursor: pointer; transition: all .2s; text-transform: uppercase;
}
.btn-reset-player:hover { border-color: var(--red2); color: #f07060; background: linear-gradient(145deg, #280a0a, #180606); }

.eliminated-banner {
  position: absolute; inset: 0;
  background: rgba(7,8,13,.88);
  display: flex; align-items: center; justify-content: center;
  font-weight: 900; font-size: 1.35rem; letter-spacing: .12em;
  color: var(--danger2); border-radius: 8px;
  backdrop-filter: blur(4px); z-index: 30;
  text-shadow: 0 0 25px rgba(220,32,32,.7);
  animation: bIn .4s ease;
  border: 1px solid rgba(220,32,32,.25);
}
.eliminated-banner.poison-death { color: #c070e8; text-shadow: 0 0 25px rgba(180,80,220,.6); border-color: rgba(180,80,220,.25); }
@keyframes bIn { from{opacity:0;transform:scale(.92)} to{opacity:1;transform:scale(1)} }

/* ════════════════════════════════════════
   PLAYER MANAGEMENT
════════════════════════════════════════ */
.player-management {
  position: relative; z-index: 10;
  display: flex; gap: .6rem; justify-content: center;
  padding: .4rem 1.2rem .8rem; flex-wrap: wrap;
}
.btn-manage {
  background: linear-gradient(145deg, #181a28, #10121e);
  border: 1px solid rgba(212,168,60,.2); color: var(--tx2);
  font-family: 'Palatino Linotype', Palatino, serif;
  font-size: .66rem; letter-spacing: .1em; padding: .42rem 1rem;
  border-radius: 20px; cursor: pointer; transition: all .2s; text-transform: uppercase;
}
.btn-manage:hover:not(:disabled) { border-color: var(--g2); color: var(--g4); box-shadow: var(--gold-glow); }
.btn-manage.remove:hover:not(:disabled) { border-color: var(--red2); color: #f07060; box-shadow: 0 0 15px rgba(180,40,30,.15); }
.btn-manage.reset-all:hover { border-color: var(--blue2); color: #80b0f0; }
.btn-manage:disabled { opacity: .3; cursor: not-allowed; }

/* ════════════════════════════════════════
   TOOLS DIVIDER
════════════════════════════════════════ */
.tools-divider {
  position: relative; z-index: 10;
  display: flex; align-items: center; gap: .8rem;
  padding: .6rem 1.2rem .4rem;
  font-size: .56rem; letter-spacing: .35em; color: var(--tx3); text-transform: uppercase;
}
.tools-divider::before, .tools-divider::after {
  content: ''; flex: 1; height: 1px;
  background: linear-gradient(90deg, transparent, var(--g1), transparent); opacity: .5;
}

/* ════════════════════════════════════════
   TOOLS GRID
════════════════════════════════════════ */
.tools-grid {
  position: relative; z-index: 10;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.1rem; padding: .4rem 1.2rem 1.5rem;
}

.tool-card {
  background: var(--card-bg);
  border: 2px solid var(--g1);
  border-radius: 10px;
  padding: 1.2rem;
  display: flex; flex-direction: column; align-items: center; gap: .9rem;
  position: relative;
  box-shadow: var(--sh2);
  /* CRITICAL: isolation prevents 3D children from bleeding out */
  isolation: isolate;
  overflow: hidden;
}

/* Subtle arcane corner rune marks */
.tool-card::before {
  content: '✦ ✦';
  position: absolute; top: .45rem; left: 0; right: 0;
  text-align: center; font-size: .35rem; letter-spacing: .8rem;
  color: var(--g1); opacity: .45; pointer-events: none; z-index: 0;
}

/* Top shimmer line */
.tool-card::after {
  content: '';
  position: absolute; top: 0; left: 15%; right: 15%; height: 1px;
  background: linear-gradient(90deg, transparent, var(--g3), var(--g5), var(--g3), transparent);
  opacity: .3; pointer-events: none;
}

.tool-card > * { position: relative; z-index: 1; }

.tool-title {
  font-weight: 700; font-size: .8rem; letter-spacing: .2em; text-transform: uppercase;
  background: linear-gradient(90deg, var(--g1), var(--g4), var(--g5), var(--g4), var(--g1));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  align-self: flex-start; padding-bottom: .4rem;
  border-bottom: 1px solid rgba(212,168,60,.12); width: 100%;
}

/* ════════════════════════════════════════
   COIN — Realistic metallic
════════════════════════════════════════ */
.coin-wrap {
  perspective: 700px;
  width: 130px; height: 130px; cursor: pointer;
  filter: drop-shadow(0 12px 28px rgba(0,0,0,.9));
}

.coin {
  width: 130px; height: 130px;
  position: relative; transform-style: preserve-3d;
}
.coin.flipping { animation: coinArc 1.15s cubic-bezier(.18,.6,.4,1) forwards; }
@keyframes coinArc {
  0%   { transform: rotateY(0deg)    translateY(0);    }
  20%  { transform: rotateY(360deg)  translateY(-44px); }
  42%  { transform: rotateY(720deg)  translateY(-60px); }
  62%  { transform: rotateY(900deg)  translateY(-32px); }
  80%  { transform: rotateY(1050deg) translateY(-8px);  }
  92%  { transform: rotateY(1078deg) translateY(-1px);  }
  100% { transform: rotateY(1080deg) translateY(0);     }
}
.coin.show-heads { transform: rotateY(0deg); }
.coin.show-tails { transform: rotateY(180deg); }

.coin-face {
  position: absolute; inset: 0; border-radius: 50%;
  backface-visibility: hidden;
  display: flex; align-items: center; justify-content: center; overflow: hidden;
}

/* HEADS — warm gold */
.coin-face.front {
  background:
    radial-gradient(circle at 30% 28%, rgba(255,248,200,.35) 0%, transparent 36%),
    radial-gradient(circle at 72% 74%, rgba(0,0,0,.4) 0%, transparent 38%),
    conic-gradient(from 0deg,
      #6a4a0c 0deg,  #c9a030 22deg, #f0d060 45deg, #c9a030 68deg,
      #8a6018 100deg, #d8b040 130deg, #f5d878 155deg, #c9a030 178deg,
      #6a4a0c 210deg, #c9a030 240deg, #f0d060 265deg, #c9a030 288deg,
      #8a6018 315deg, #d8b040 340deg, #c9a030 360deg
    );
  transform: rotateY(0deg);
  box-shadow:
    0 0 0 4px #5a3a08, 0 0 0 6px #a88020,
    0 0 0 8px #3a2408, 0 0 0 11px #1e1408,
    inset 0 3px 8px rgba(255,248,180,.22),
    inset 0 -4px 8px rgba(0,0,0,.45);
}

.coin-face.front .coin-inner {
  width: 88px; height: 88px; border-radius: 50%;
  background:
    radial-gradient(circle at 33% 30%, rgba(255,255,180,.28) 0%, transparent 35%),
    conic-gradient(from 25deg,
      #c9a030 0deg, #f0d060 32deg, #8a6018 72deg, #d8b040 108deg,
      #c9a030 148deg, #f5d878 185deg, #8a6018 222deg, #d8b040 262deg,
      #c9a030 298deg, #f0d060 334deg, #c9a030 360deg
    );
  border: 2px solid rgba(255,240,120,.18);
  display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 2px;
  box-shadow: inset 0 2px 5px rgba(255,240,120,.28), inset 0 -3px 5px rgba(0,0,0,.38);
}

.coin-letter {
  font-weight: 900; font-size: 2.1rem; line-height: 1; color: #1e0e00;
  font-family: 'Palatino Linotype', Palatino, serif;
  text-shadow: 0 1px 0 rgba(255,220,80,.4), 0 -1px 0 rgba(0,0,0,.5);
  filter: drop-shadow(0 1px 2px rgba(0,0,0,.6));
}
.coin-text {
  font-size: .33rem; letter-spacing: .2em; color: #2a1400;
  font-family: 'Palatino Linotype', Palatino, serif; text-transform: uppercase; opacity: .75;
}

/* TAILS — cool silver */
.coin-face.back {
  background:
    radial-gradient(circle at 30% 28%, rgba(240,255,255,.35) 0%, transparent 36%),
    radial-gradient(circle at 72% 74%, rgba(0,0,0,.35) 0%, transparent 38%),
    conic-gradient(from 0deg,
      #48585a 0deg,  #8ab0b2 22deg, #c8e0e2 45deg, #8ab0b2 68deg,
      #586868 100deg, #9ac0c2 130deg, #d0e8ea 155deg, #8ab0b2 178deg,
      #48585a 210deg, #8ab0b2 240deg, #c8e0e2 265deg, #8ab0b2 288deg,
      #586868 315deg, #9ac0c2 340deg, #8ab0b2 360deg
    );
  transform: rotateY(180deg);
  box-shadow:
    0 0 0 4px #384848, 0 0 0 6px #789898,
    0 0 0 8px #203030, 0 0 0 11px #101c1c,
    inset 0 3px 8px rgba(220,240,242,.25),
    inset 0 -4px 8px rgba(0,0,0,.4);
}
.coin-face.back .coin-inner {
  width: 88px; height: 88px; border-radius: 50%;
  background:
    radial-gradient(circle at 33% 30%, rgba(220,245,255,.3) 0%, transparent 35%),
    conic-gradient(from 25deg,
      #8ab0b2 0deg, #c8e0e2 32deg, #586868 72deg, #9ac0c2 108deg,
      #8ab0b2 148deg, #d0e8ea 185deg, #586868 222deg, #9ac0c2 262deg,
      #8ab0b2 298deg, #c8e0e2 334deg, #8ab0b2 360deg
    );
  border: 2px solid rgba(200,240,242,.18);
  display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 2px;
  box-shadow: inset 0 2px 5px rgba(220,245,255,.3), inset 0 -3px 5px rgba(0,0,0,.32);
}
.coin-face.back .coin-letter { color: #081818; text-shadow: 0 1px 0 rgba(200,245,255,.3), 0 -1px 0 rgba(0,0,0,.5); }
.coin-face.back .coin-text   { color: #081818; }

.result-label {
  font-size: 1.5rem; font-weight: 700; letter-spacing: .08em;
  font-family: 'Palatino Linotype', Palatino, serif;
  animation: rPop .35s cubic-bezier(.17,.67,.3,1.5);
}
.result-label.heads { color: var(--g4); text-shadow: 0 0 18px rgba(212,168,60,.55); }
.result-label.tails { color: #90c0c8; text-shadow: 0 0 18px rgba(144,192,200,.45); }

@keyframes rPop { from{transform:scale(.35)translateY(12px);opacity:0} to{transform:scale(1)translateY(0);opacity:1} }

/* ════════════════════════════════════════
   DICE — Dark Obsidian + Arcane Glow
════════════════════════════════════════ */
.dice-selector {
  display: flex; flex-wrap: wrap; gap: .38rem; justify-content: center;
  width: 100%;
  /* Push below the shimmer line in tool-card::after */
  padding-top: .2rem;
}

.die-btn {
  background: linear-gradient(145deg, #1c1e2e, #12141e);
  border: 1px solid var(--border); color: var(--tx2);
  font-size: .64rem; padding: .28rem .62rem; border-radius: 5px;
  cursor: pointer; transition: all .14s;
  font-family: 'Palatino Linotype', Palatino, serif; letter-spacing: .04em;
}
.die-btn.selected {
  background: linear-gradient(145deg,
    color-mix(in srgb, var(--die-color, var(--blue2)) 20%, #1c1e2e),
    color-mix(in srgb, var(--die-color, var(--blue2)) 8%, #12141e)
  );
  border-color: var(--die-color, var(--blue2)); color: var(--die-color, var(--blue2));
  box-shadow: 0 0 8px color-mix(in srgb, var(--die-color, var(--blue2)) 40%, transparent);
}
.die-btn:hover:not(.selected) { border-color: var(--border2); color: var(--tx1); }

/* Die-specific accent colors */
.die-btn[data-die="4"]  { --die-color: var(--red2); }
.die-btn[data-die="6"]  { --die-color: #e8a030; }
.die-btn[data-die="8"]  { --die-color: var(--green2); }
.die-btn[data-die="10"] { --die-color: var(--blue2); }
.die-btn[data-die="12"] { --die-color: #b060e8; }
.die-btn[data-die="20"] { --die-color: var(--g4); }
.die-btn[data-die="100"]{ --die-color: #e87080; }

/* 3D scene — FIXED: enough height, isolation, no overflow bleed */
.dice-scene-wrapper {
  width: 100%;
  display: flex; flex-direction: column; align-items: center;
  gap: .8rem;
  /* Reserve explicit height so nothing above/below overlaps */
  min-height: 140px;
  padding-top: .5rem;
}

.dice-scene {
  width: 110px; height: 110px; flex-shrink: 0;
  perspective: 380px; perspective-origin: 52% 38%;
  cursor: pointer;
  filter: drop-shadow(0 14px 30px rgba(0,0,0,.95));
}

.dice-cube {
  width: 110px; height: 110px;
  position: relative; transform-style: preserve-3d;
  transform: rotateX(22deg) rotateY(38deg);
  transition: transform .08s;
}

.dice-cube.rolling {
  animation: dRoll 1.05s cubic-bezier(.22,.68,.48,.98) forwards;
}
@keyframes dRoll {
  0%   { transform: rotateX(22deg)  rotateY(38deg)  rotateZ(0deg)   translateY(0);    }
  12%  { transform: rotateX(120deg) rotateY(80deg)  rotateZ(35deg)  translateY(-22px); }
  28%  { transform: rotateX(260deg) rotateY(180deg) rotateZ(80deg)  translateY(-40px); }
  48%  { transform: rotateX(420deg) rotateY(290deg) rotateZ(120deg) translateY(-28px); }
  66%  { transform: rotateX(560deg) rotateY(390deg) rotateZ(155deg) translateY(-10px); }
  80%  { transform: rotateX(650deg) rotateY(445deg) rotateZ(172deg) translateY(-3px);  }
  92%  { transform: rotateX(700deg) rotateY(470deg) rotateZ(179deg) translateY(0);     }
  100% { transform: rotateX(720deg) rotateY(480deg) rotateZ(180deg) translateY(0);     }
}
.dice-cube.rolled { animation: dSettle .45s cubic-bezier(.2,.9,.4,1) forwards; }
@keyframes dSettle {
  from { transform: rotateX(720deg) rotateY(480deg) rotateZ(180deg); }
  to   { transform: rotateX(22deg) rotateY(38deg) rotateZ(0deg); }
}

/* Faces — dark obsidian with colored glow */
.dice-face {
  position: absolute; width: 110px; height: 110px;
  border-radius: 14px;
  display: flex; align-items: center; justify-content: center;
  backface-visibility: hidden;
  /* Base: dark cosmic obsidian */
  background: linear-gradient(145deg, #1e2238, #141828, #0e1020);
  border: 1.5px solid #2e3458;
  box-shadow: inset 0 2px 6px rgba(80,100,200,.1), inset 0 -3px 6px rgba(0,0,0,.5);
}

.dice-face.front  { transform: rotateY(0deg)   translateZ(55px); }
.dice-face.back   { transform: rotateY(180deg) translateZ(55px); }
.dice-face.right  { transform: rotateY(90deg)  translateZ(55px); }
.dice-face.left   { transform: rotateY(-90deg) translateZ(55px); }
.dice-face.top    { transform: rotateX(90deg)  translateZ(55px); }
.dice-face.bottom { transform: rotateX(-90deg) translateZ(55px); }

/* Side faces: slightly different tint for depth */
.dice-face.right  { background: linear-gradient(145deg, #1a1e32, #111628, #0c1018); border-color: #263050; }
.dice-face.top    { background: linear-gradient(145deg, #222640, #181c30, #121420); border-color: #323860; box-shadow: inset 0 3px 8px rgba(100,120,255,.08); }
.dice-face.left   { background: linear-gradient(145deg, #171a2a, #0f1222, #0a0e18); border-color: #22294a; }
.dice-face.bottom { background: linear-gradient(145deg, #101420, #0c1018, #080c14); border-color: #1a2038; }

/* Side face pip icons */
.dice-face .pip-icon {
  font-size: 1.15rem; opacity: .25; color: var(--blue2);
  filter: blur(.3px);
}

/* Front face — shows result with die-color accent */
.dice-face.front {
  background: linear-gradient(145deg,
    color-mix(in srgb, var(--die-color, var(--blue2)) 12%, #1e2238),
    color-mix(in srgb, var(--die-color, var(--blue2)) 6%, #141828),
    #0e1020
  );
  border-color: color-mix(in srgb, var(--die-color, var(--blue2)) 45%, transparent);
  box-shadow:
    inset 0 2px 6px color-mix(in srgb, var(--die-color, var(--blue2)) 10%, transparent),
    inset 0 -3px 6px rgba(0,0,0,.5);
}

/* Crit / Fail special faces */
.dice-face.front.crit-face {
  background: linear-gradient(145deg, #2a2408, #1e1808, #141205) !important;
  border-color: var(--g3) !important;
  box-shadow: inset 0 2px 6px rgba(212,168,60,.15),
              0 0 30px rgba(212,168,60,.35) !important;
}
.dice-face.front.fail-face {
  background: linear-gradient(145deg, #2a0808, #1e0606, #140404) !important;
  border-color: var(--red2) !important;
  box-shadow: inset 0 2px 6px rgba(220,60,40,.12),
              0 0 25px rgba(220,60,40,.3) !important;
}

/* Number on front face */
.die-result-display { display: flex; flex-direction: column; align-items: center; gap: .05rem; }
.die-result-display .die-number {
  font-weight: 900; font-size: 2.2rem; line-height: 1;
  font-family: 'Palatino Linotype', Palatino, serif;
  color: var(--die-color, var(--blue2));
  text-shadow: 0 0 16px color-mix(in srgb, var(--die-color, var(--blue2)) 70%, transparent);
  filter: drop-shadow(0 1px 3px rgba(0,0,0,.8));
}
.die-result-display .die-label { font-size: .44rem; letter-spacing: .12em; color: var(--tx3); }
.dice-face.front.crit-face .die-number { color: var(--g5) !important; text-shadow: 0 0 20px rgba(212,168,60,.8) !important; }
.dice-face.front.fail-face .die-number { color: var(--red2) !important; text-shadow: 0 0 18px rgba(220,60,40,.7) !important; }

.crit-label {
  font-weight: 700; font-size: .9rem; letter-spacing: .15em; text-transform: uppercase;
  color: var(--g4); text-shadow: 0 0 18px rgba(212,168,60,.75);
  animation: rPop .3s cubic-bezier(.17,.67,.3,1.5);
}
.fail-label {
  font-size: .9rem; letter-spacing: .1em; text-transform: uppercase;
  color: var(--red2); text-shadow: 0 0 18px rgba(220,60,40,.6);
  animation: rPop .3s ease;
}

/* ════════════════════════════════════════
   TOOL BUTTON
════════════════════════════════════════ */
.btn-tool {
  background: linear-gradient(145deg, rgba(212,168,60,.14), rgba(100,72,20,.07));
  border: 1px solid var(--g1); color: var(--g4);
  font-family: 'Palatino Linotype', Palatino, serif;
  font-size: .73rem; font-weight: 700; letter-spacing: .15em;
  padding: .6rem 1.8rem; border-radius: 25px; cursor: pointer;
  transition: all .2s; text-transform: uppercase; position: relative; overflow: hidden;
}
.btn-tool::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; height: 50%;
  background: rgba(255,255,255,.03); border-radius: 25px 25px 0 0; pointer-events: none;
}
.btn-tool:hover:not(:disabled) {
  background: linear-gradient(145deg, rgba(212,168,60,.26), rgba(100,72,20,.12));
  border-color: var(--g3); color: var(--g5);
  box-shadow: var(--gold-glow), 0 4px 16px rgba(0,0,0,.5);
  transform: translateY(-1px);
}
.btn-tool:active { transform: translateY(0); }
.btn-tool:disabled { opacity: .38; cursor: not-allowed; transform: none; }

/* ════════════════════════════════════════
   HISTORY CHIPS
════════════════════════════════════════ */
.toss-history { display: flex; flex-wrap: wrap; gap: .28rem; justify-content: center; min-height: 1.6rem; }
.history-chip {
  background: linear-gradient(145deg, #181a28, #10121e);
  border: 1px solid var(--border); border-radius: 4px;
  padding: .1rem .38rem; font-size: .62rem; color: var(--tx2);
  font-family: 'Palatino Linotype', Palatino, serif;
}
.history-chip.heads { border-color: rgba(212,168,60,.28); color: var(--g2); }
.history-chip.tails { border-color: rgba(130,170,175,.2); color: #607878; }

/* ════════════════════════════════════════
   RESPONSIVE
════════════════════════════════════════ */
@media (max-width: 580px) {
  .app-header { padding: .8rem 1rem; }
  .players-grid, .tools-grid, .player-management { padding: .8rem; gap: .8rem; }
  .life-number { font-size: 3.2rem; }
  .tools-grid { grid-template-columns: 1fr; }
  .coin-wrap { width: 110px; height: 110px; }
  .coin { width: 110px; height: 110px; }
  .coin-face.front .coin-inner, .coin-face.back .coin-inner { width: 76px; height: 76px; }
}

/* Scrollbar */
::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: var(--void); }
::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--g1); }
